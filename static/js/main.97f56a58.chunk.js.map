{"version":3,"sources":["../../src/index.js","App.js","index.js"],"names":["defaultDisplayMediaOptions","audio","video","cursor","displayMediaOptions","onEnd","onError","onStart","React","captureStream","setCaptureStream","error","setError","mediaRecorder","setMediaRecorder","isRecording","setIsRecording","recording","setRecording","stopRecording","track","e","startRecording","a","navigator","stream","recorder","MediaRecorder","event","toggleRecording","App","useScreenRecording","className","onClick","autoPlay","src","URL","createObjectURL","ReactDOM","render","document","getElementById"],"mappings":"g/CAEA,IAAMA,EAA6B,CACjCC,OADiC,EAEjCC,MAAO,CAAEC,OAAQ,W,MAGJ,WAKP,6DAAJ,GAAI,IAJNC,2BAIM,MAJgBJ,EAIhB,MAHNK,aAGM,MAHE,aAGF,MAFNC,eAEM,MAFI,aAEJ,MADNC,eACM,MADI,aACJ,IACoCC,mBADpC,eACCC,EADD,KACgBC,EADhB,OAEoBF,mBAFpB,eAECG,EAFD,KAEQC,EAFR,OAGoCJ,mBAHpC,eAGCK,EAHD,KAGgBC,EAHhB,OAIgCN,oBAJhC,YAICO,EAJD,KAIcC,EAJd,OAK4BR,mBAL5B,eAKCS,EALD,KAKYC,EALZ,KAMAC,EAAgB,WACpB,IACEH,MACAH,SACAJ,uBAAkC,mBAAWW,EAAX,UAClC,MAAOC,GACPf,KACAM,OAGEU,EAAc,6BAAG,8BAAAC,EAAA,+EAEEC,uCAFF,UAEbC,EAFa,OAKnBT,MACAS,uBAA2B,YACzBL,eAEFV,MACMgB,EAAW,IAAIC,cAVF,IAWnBD,gBAA2B,YACzBrB,KACAa,EAAaU,EAAbV,OAEFQ,UACAZ,KACAP,EAAQ,CAAEkB,OAAF,EAAUC,aAjBC,kDAmBnBV,MACAV,EAAQ,EAARA,IACAM,EAAS,EAATA,IArBmB,0DAAH,qDAwBdiB,EAAkB,kBACtBd,EAAcI,IAAkBG,KAElC,MAAO,CACLb,cADK,EAELE,MAFK,EAGLI,YAHK,EAILF,cAJK,EAKLI,UALK,EAMLK,eANK,EAOLH,cAPK,EAQLU,oBC3DW,SAASC,IAAO,IAAD,EACwBC,IAA5ChB,EADoB,EACpBA,YAAaE,EADO,EACPA,UAAWY,EADJ,EACIA,gBAEhC,OACE,yBAAKG,UAAU,QACb,0CACA,kDAEA,4BAAQC,QAASJ,GACdd,EAAc,OAAS,qBAEvBE,GACD,2BACEiB,UAAQ,EACRF,UAAU,QACVG,IAAKlB,GAAamB,IAAIC,gBAAgBpB,MCbhDqB,IAASC,OAAO,kBAACT,EAAD,MAASU,SAASC,eAAe,U","file":"static/js/main.97f56a58.chunk.js","sourcesContent":["import * as React from \"react\";\n\nconst defaultDisplayMediaOptions = {\n  audio: false,\n  video: { cursor: \"always\" },\n};\n\nexport default function useScreenRecording({\n  displayMediaOptions = defaultDisplayMediaOptions,\n  onEnd = () => {},\n  onError = () => {},\n  onStart = () => {},\n} = {}) {\n  const [captureStream, setCaptureStream] = React.useState(null);\n  const [error, setError] = React.useState(null);\n  const [mediaRecorder, setMediaRecorder] = React.useState(null);\n  const [isRecording, setIsRecording] = React.useState(false);\n  const [recording, setRecording] = React.useState(null);\n  const stopRecording = () => {\n    try {\n      setIsRecording(false);\n      mediaRecorder.stop();\n      captureStream.getTracks().forEach((track) => track.stop());\n    } catch (e) {\n      onError(e);\n      setError(e);\n    }\n  };\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getDisplayMedia(\n        displayMediaOptions\n      );\n      setIsRecording(true);\n      stream.getTracks().forEach((track) => {\n        track.onended = stopRecording;\n      });\n      setCaptureStream(stream);\n      const recorder = new MediaRecorder(stream);\n      recorder.ondataavailable = (event) => {\n        onEnd(event);\n        setRecording(event.data);\n      };\n      recorder.start();\n      setMediaRecorder(recorder);\n      onStart({ stream, recorder });\n    } catch (e) {\n      setIsRecording(false);\n      onError(e);\n      setError(e);\n    }\n  };\n  const toggleRecording = () =>\n    isRecording ? stopRecording() : startRecording();\n\n  return {\n    captureStream,\n    error,\n    isRecording,\n    mediaRecorder,\n    recording,\n    startRecording,\n    stopRecording,\n    toggleRecording,\n  };\n}\n","import React from \"react\";\n\nimport useScreenRecording from \"use-screen-recording\";\n\nexport default function App() {\n  const { isRecording, recording, toggleRecording } = useScreenRecording();\n\n  return (\n    <div className=\"root\">\n      <h1>React Hook</h1>\n      <h2>useScreenRecording</h2>\n\n      <button onClick={toggleRecording}>\n        {isRecording ? \"Stop\" : \"Start Recording\"}\n      </button>\n      {!!recording && (\n        <video\n          autoPlay\n          className=\"video\"\n          src={recording && URL.createObjectURL(recording)}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}